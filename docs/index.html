<!DOCTYPE html>
<html>

<head>
  <title>Selective Disclosure Benchmark</title>
  <meta http-equiv='Content-Type' content='text/html;charset=utf-8' />
  <script src='https://www.w3.org/Tools/respec/respec-w3c' class='remove'></script>
  <script src="https://cdn.jsdelivr.net/npm/uplot@1.6.25/dist/uPlot.iife.min.js"></script>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/uplot@1.6.25/dist/uPlot.min.css">
  <script src='./plotter.js'></script>
  <script type="text/javascript" class="remove">
    var respecConfig = {
      // group: "vc",
      shortName: "sd-benchmark",
      specStatus: "unofficial",
      // subtitle: "Test of ReSpec VC",
      // edDraftURI: "https://transmute-industries.github.io/vc-jwt-sd/",
      latestVersion: "https://github.com/transmute-industries/vc-jwt-sd",
      doJsonLd: false,
      // github: "https://github.com/transmute-industries/vc-jwt-sd",
      includePermalinks: false,
      editors: [
        {
          name: "Orie Steele", url: "https://www.linkedin.com/in/or13b/",
          company: "Transmute", companyURL: "http://transmute.industries/"
        }
      ],
      authors:
        [
          {
            name: "Orie Steele", url: "https://www.linkedin.com/in/or13b/",
            company: "Transmute", companyURL: "http://transmute.industries/"
          }
        ],
      maxTocLevel: 2,
      inlineCSS: true,
    };
  </script>
</head>

<body>
  <section id="abstract">
    <p>
      Selective Disclosure and Unlinkability,
      or Disassociability are privacy and consent
      oriented features of digital credential formats.
    </p>
    <p>
      In order to support these features, claims need to be structured or transformed so that cryptographic envelopes
      can be applied.
      Digital credential formats make tradeoffs between size and compute, and also issuance vs presentation.
    </p>
    <p>
      This document is meant to give a general sense of these trade offs.
      The implementations under test here have not been optimized for performance and are implemented in javascript.
    </p>
  </section>
  <section>
    <h2>Methodology</h2>
    <p>
      In order to compare approaches, we need to generate examples
      that can be tested via both Data Integrity Proofs and
      Selective Disclosure JSON Web Tokens.
    </p>
    <p>
      We accomplish this by iteratively extending the internationalization examples
      in the W3C Verifiable Credentials Specification.
    </p>
    <p>
      Data Integrity Proofs and SD-JWT take different approaches to disclosure, which impact performance and security.
      These implementation details impact performance, but are not necessarily required by the specifications.
      Data Integrity Proofs require mandatory to disclose fields to be marked with JSON Pointer.
      SD-JWTs require optional to disclose fields to be marked with YAML tags.
    </p>
    <p>
      We then average the execution time of issuance, and compare growth of issuance time for the credential formats to the number of names.
    </p>
    <p>
      See these examples generated for the length 5, to understand the approach taken:
    </p>
    <pre class="example nohighlight" title="An example with a list of values">
{
  "@context": [
    "https://www.w3.org/ns/credentials/v2",
    "https://www.w3.org/ns/credentials/examples/v2"
  ],
  "id": "http://university.example/credentials/3732",
  "type": [
    "VerifiableCredential",
    "ExampleDegreeCredential"
  ],
  "issuer": {
    "id": "https://university.example/issuers/565049",
    "name": [
      {
        "value": "test value 0",
        "lang": "en"
      },
      {
        "value": "test value 1",
        "lang": "en"
      },
      {
        "value": "test value 2",
        "lang": "en"
      },
      {
        "value": "test value 3",
        "lang": "en"
      },
      {
        "value": "test value 4",
        "lang": "en"
      }
    ]
  },
  "validFrom": "2015-05-10T12:30:00Z",
  "credentialSubject": {
    "id": "did:example:ebfeb1f712ebc6f1c276e12ec21",
    "degree": {
      "type": "ExampleBachelorDegree",
      "subtype": "Bachelor of Science and Arts"
    }
  }
}
    </pre>
    <pre class="example nohighlight" title="Mandatory to disclose JSON Pointers">
[
  "/issuer/name/1"
]
    </pre>
    <pre class="example nohighlight" title="Selectively disclosed JSON Pointers">
[
  "/issuer/name/0",
  "/issuer/name/3"
]
    </pre>
    <pre class="example nohighlight" title="Disclosable claims">
"@context":
  - https://www.w3.org/ns/credentials/v2
  - https://www.w3.org/ns/credentials/examples/v2
id: http://university.example/credentials/3732
type:
  - VerifiableCredential
  - ExampleDegreeCredential
issuer:
  id: https://university.example/issuers/565049
  name:
    - value: test value 0
      lang: en
    - !sd
      value: test value 1
      lang: en
    - value: test value 2
      lang: en
    - !sd
      value: test value 3
      lang: en
    - value: test value 4
      lang: en
validFrom: 2015-05-10T12:30:00Z
credentialSubject:
  id: did:example:ebfeb1f712ebc6f1c276e12ec21
  degree:
    type: ExampleBachelorDegree
    subtype: Bachelor of Science and Arts
    </pre>

    <pre class="example nohighlight" title="Disclosure of claims">
"@context":
  - https://www.w3.org/ns/credentials/v2
  - https://www.w3.org/ns/credentials/examples/v2
id: http://university.example/credentials/3732
type:
  - VerifiableCredential
  - ExampleDegreeCredential
issuer:
  id: https://university.example/issuers/565049
  name:
    - value: test value 0
      lang: en
    - true
    - value: test value 2
      lang: en
    - false
    - value: test value 4
      lang: en
validFrom: 2015-05-10T12:30:00Z
credentialSubject:
  id: did:example:ebfeb1f712ebc6f1c276e12ec21
  degree:
    type: ExampleBachelorDegree
    subtype: Bachelor of Science and Arts
    </pre>
  </section>
  <section>
    <h2>Issuance</h2>
    <p>
      <a href="https://github.com/transmute-industries/vc-jwt-sd/blob/main/test/benchmarking/vs.issuance.test.ts">View
        Source</a>
    </p>
    <div id="issuance-benchmark"></div>
  </section>
  <section>
    <h2>Presentation</h2>
    <p>
      <a href="https://github.com/transmute-industries/vc-jwt-sd/blob/main/test/benchmarking/vs.presentation.test.ts">View
        Source</a>
    </p>
    <div id="presentation-benchmark"></div>
  </section>
  <section>
    <h2>Analysis</h2>
    <p>As a general rule, both approaches performance degrades as the size of the input grows.</p>
    <p>
      Data Integrity Proofs take a strict validation approach at the time of issuance by 
      performing addition syntax and semantics checks to ensure RDF compatibility.
    </p>
    <p>
      SD-JWT tends to treat the claimset as a JSON object, 
      and does not apply any semantic or syntax checks 
      beyond the basics required to ensure valid JSON.
    </p>
  </section>
</body>

</html>